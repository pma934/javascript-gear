<html>

<body>
    <canvas id="drawing" width="200" height="200"></canvas>
    <canvas id="drawing1" width="200" height="200"></canvas>
    <canvas id="drawing2" width="200" height="200"></canvas>
    <hr>
    <button onclick="sleep()">sleep</button>
    <button onclick="_clear()">clear</button>
    <script>
        var drawing = document.getElementById("drawing");
        var drawing1 = document.getElementById("drawing1");
        var drawing2 = document.getElementById("drawing2");

        var ctx = drawing.getContext("2d");
        var ctx1 = drawing1.getContext("2d");
        var ctx2 = drawing2.getContext("2d");

        ctx.beginPath();
        ctx1.beginPath();
        ctx2.beginPath();
        var i = 0,
            j = 0,
            k = 0;

        setInterval(() => {
            i++;
            ctx.arc(100, 100, 50, Math.PI / 90 * i, Math.PI / 90 * (i + 1), false);
            ctx.stroke();
        }, 16.7);

        setOut();
        function setOut() {
            setTimeout(() => {
                j++;
                ctx1.arc(100, 100, 50, Math.PI / 90 * j, Math.PI / 90 * (j + 1), false);
                ctx1.stroke();
                setOut();
            }, 16.7);
        }

        anmia();
        function anmia() {
            k++;
            requestAnimationFrame(() => {
                ctx2.arc(100, 100, 50, Math.PI / 90 * k, Math.PI / 90 * (k + 1), false);
                ctx2.stroke();
                anmia();
            });
        }

        function sleep() {
            console.log("sleep");
            date = new Date();
            while (1) {
                if (new Date() - date >= 3000) {
                    break;
                }
            }
        }

        function _clear() {
            drawing.width = drawing.width;
            drawing1.width = drawing1.width;
            drawing2.width = drawing2.width;
        }

    </script>
</body>

</html>